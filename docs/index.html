<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å›¾ç‰‡å¤„ç†æœåŠ¡ä¸­å¿ƒ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
      color: #333;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      background-color: #4CAF50;
      color: white;
      padding: 20px 0;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    h1 {
      margin: 0;
      font-size: 2.5em;
    }
    
    .subtitle {
      font-size: 1.2em;
      margin-top: 10px;
    }
    
    .features {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin: 40px 0;
    }
    
    .feature-card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 30px;
      flex: 1;
      min-width: 300px;
      text-align: center;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .feature-icon {
      font-size: 4em;
      margin-bottom: 20px;
      color: #4CAF50;
    }
    
    h2 {
      color: #333;
      margin-bottom: 15px;
    }
    
    p {
      color: #666;
      margin-bottom: 20px;
      line-height: 1.5;
    }
    
    .btn {
      display: inline-block;
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      text-decoration: none;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }
    
    .btn:hover {
      background-color: #45a049;
    }
    
    .btn-secondary {
      background-color: #f0f0f0;
      color: #333;
    }
    
    .btn-secondary:hover {
      background-color: #e0e0e0;
    }
    
    footer {
      background-color: #333;
      color: white;
      text-align: center;
      padding: 20px 0;
      margin-top: 40px;
    }
    
    .status {
      display: inline-block;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 0.8em;
      margin-top: 10px;
    }
    
    .status-ready {
      background-color: #4CAF50;
      color: white;
    }
    
    .status-coming {
      background-color: #ff9800;
      color: white;
    }
    
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }
      
      h1 {
        font-size: 2em;
      }
      
      .feature-card {
        min-width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
          <h1>å›¾ç‰‡å¤„ç†æœåŠ¡ä¸­å¿ƒ</h1>
          <p class="subtitle">ä¸€ç«™å¼å›¾ç‰‡å¤„ç†å·¥å…·é›†åˆ</p>
        </div>
        <div id="authContainer">
          <a href="../auth/login.html" class="btn" id="loginBtn">ç™»å½•</a>
          <div style="display: none; align-items: center; gap: 10px;" id="userInfoContainer">
            <span id="userName" style="color: white;">ç”¨æˆ·</span>
            <button class="btn btn-secondary" id="logoutBtn" style="margin-left: 10px;">é€€å‡ºç™»å½•</button>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <div class="container">
    <section class="features">
      <div class="feature-card">
        <div class="feature-icon">ğŸ§©</div>
        <h2>æ‹¼å›¾å·¥å…·</h2>
        <p>å°†å¤šå¼ å›¾ç‰‡åˆå¹¶ä¸ºä¸€å¼ æ‹¼å›¾ï¼Œæ”¯æŒç”ŸæˆAlphaé€šé“å›¾å’Œä½ç½®ä¿¡æ¯æ–‡ä»¶ï¼Œå¯å°†æ‹¼å›¾åˆ‡å‰²å›åŸå§‹å›¾ç‰‡ã€‚</p>
        <a href="../imgassli/index.html" class="btn">ç«‹å³ä½¿ç”¨</a>
        <span class="status status-ready">å·²å°±ç»ª</span>
      </div>
      
      <div class="feature-card">
        <div class="feature-icon">ğŸ–¼ï¸</div>
        <h2>å›¾ç‰‡ç¼–è¾‘å™¨</h2>
        <p>åŸºäºKonvaå®ç°çš„å›¾ç‰‡ç¼–è¾‘å™¨ï¼Œæ”¯æŒå›¾ç‰‡è£å‰ªã€è°ƒæ•´ã€æ»¤é•œç­‰åŠŸèƒ½ã€‚</p>
        <a href="../image-edit/index.html" class="btn">ç«‹å³ä½¿ç”¨</a>
        <span class="status status-ready">å·²å°±ç»ª</span>
      </div>
      
      <div class="feature-card">
        <div class="feature-icon">ğŸ”®</div>
        <h2>æ›´å¤šåŠŸèƒ½</h2>
        <p>æœªæ¥å°†æ¨å‡ºæ›´å¤šå›¾ç‰‡å¤„ç†åŠŸèƒ½ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
        <a href="#" class="btn btn-secondary" disabled>å³å°†ä¸Šçº¿</a>
        <span class="status status-coming">è§„åˆ’ä¸­</span>
      </div>
    </section>
  </div>
  
  <footer>
    <div class="container">
      <p>&copy; 2026 å›¾ç‰‡å¤„ç†æœåŠ¡ä¸­å¿ƒ | ImgHLP</p>
    </div>
  </footer>
  
  <script>
    // æ£€æŸ¥ç™»å½•çŠ¶æ€
    function checkLoginStatus() {
      const token = localStorage.getItem('authToken');
      const userInfo = localStorage.getItem('userInfo');
      
      const loginBtn = document.getElementById('loginBtn');
      const userInfoContainer = document.getElementById('userInfoContainer');
      const userName = document.getElementById('userName');
      
      if (token && userInfo) {
        // å·²ç™»å½•
        if (loginBtn) loginBtn.style.display = 'none';
        if (userInfoContainer) userInfoContainer.style.display = 'flex';
        if (userName) {
          try {
            const parsedUserInfo = JSON.parse(userInfo);
            userName.textContent = parsedUserInfo.username || 'ç”¨æˆ·';
          } catch (e) {
            userName.textContent = 'ç”¨æˆ·';
          }
        }
        return true;
      } else {
        // æœªç™»å½•
        if (loginBtn) loginBtn.style.display = 'inline-block';
        if (userInfoContainer) userInfoContainer.style.display = 'none';
        return false;
      }
    }
    
    // å¤„ç†ç™»å½•å›è°ƒ
    function handleLoginCallback() {
      const urlParams = new URLSearchParams(window.location.search);
      const token = urlParams.get('authToken');
      const userInfo = urlParams.get('userInfo');
      
      if (token && userInfo) {
        // å­˜å‚¨tokenå’Œç”¨æˆ·ä¿¡æ¯
        localStorage.setItem('authToken', token);
        localStorage.setItem('userInfo', userInfo);
        
        // æ¸…ç†URLå‚æ•°
        const cleanUrl = new URL(window.location.href);
        cleanUrl.searchParams.delete('authToken');
        cleanUrl.searchParams.delete('userInfo');
        window.history.replaceState({}, '', cleanUrl.toString());
        
        return true;
      }
      return false;
    }
    
    // é€€å‡ºç™»å½•
    function logout() {
      localStorage.removeItem('authToken');
      localStorage.removeItem('userInfo');
      checkLoginStatus();
      alert('å·²æˆåŠŸé€€å‡ºç™»å½•');
    }
    
    // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
    window.onload = function() {
      // å¤„ç†ç™»å½•å›è°ƒ
      handleLoginCallback();
      
      // æ£€æŸ¥ç™»å½•çŠ¶æ€
      checkLoginStatus();
      
      // è®¾ç½®ç™»å½•æŒ‰é’®çš„è¿”å›åœ°å€
      const loginBtn = document.getElementById('loginBtn');
      if (loginBtn) {
        const returnUrl = encodeURIComponent(window.location.href);
        loginBtn.href = '../auth/login.html?returnUrl=' + returnUrl;
      }
      
      // ç»‘å®šé€€å‡ºç™»å½•äº‹ä»¶
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', logout);
      }
    };
  </script>
</body>
</html>